<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USDX Management Dashboard</title>
    <!-- We'll load ethers.js dynamically in script.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <span class="dark-mode-toggle" onclick="toggleDarkMode()">
            <i class="fas fa-moon"></i>
        </span>
        <h1>USDX Token Management</h1>
        <div class="wallet-info">
            <p><i class="fas fa-wallet"></i> <span id="walletAddress">Not connected</span></p>
            <p><i class="fas fa-coins"></i> <span id="tokenBalance">0</span> USDX</p>
            <p><i class="fas fa-user-shield"></i> <span id="roleStatus">None</span></p>
            <p><i class="fas fa-network-wired"></i> <span id="networkStatus">-</span></p>
        </div>
        <button class="button" id="connectButton" onclick="connectWallet()">Connect Wallet</button>
    </div>

    <!-- Dashboard Overview -->
    <div class="dashboard-stats">
        <div class="stat-card">
            <h3>Total Supply</h3>
            <p id="totalSupply">-</p>
        </div>
        <div class="stat-card">
            <h3>Contract Status</h3>
            <p id="contractStatus">-</p>
        </div>
        <div class="stat-card">
            <h3>Reward Multiplier</h3>
            <p id="rewardMultiplier">-</p>
        </div>
        <div class="stat-card">
            <h3>Gas Price</h3>
            <p id="gasPrice">-</p>
        </div>
    </div>

    <!-- Main Dashboard Tabs -->
    <div class="tabs">
        <div class="tab active" data-tab="operations">Operations</div>
        <div class="tab" data-tab="administration">Administration</div>
        <div class="tab" data-tab="analytics">Analytics</div>
        <div class="tab" data-tab="activity">Activity Log</div>
    </div>

    <!-- Tab Content: Operations -->
    <div class="tab-content active" id="operations">
        <div class="grid">
            <!-- Transfer Section -->
            <div class="section">
                <h2><i class="fas fa-exchange-alt"></i> Token Transfers</h2>
                <div class="input-group">
                    <label for="transferAddress">Recipient Address</label>
                    <input type="text" id="transferAddress" placeholder="0x...">
                </div>
                <div class="input-group">
                    <label for="transferAmount">Amount</label>
                    <input type="number" id="transferAmount" placeholder="0.0" step="0.01">
                </div>
                <button class="button" onclick="transferTokens()">
                    <i class="fas fa-paper-plane"></i> Transfer
                </button>
            </div>

            <!-- Tokens Converter -->
            <div class="section">
                <h2><i class="fas fa-sync"></i> Tokens Converter</h2>
                <div class="input-group">
                    <label for="tokenAmount">Token Amount</label>
                    <input type="number" id="tokenAmount" placeholder="0.0" step="0.01">
                </div>
                <div class="input-group">
                    <label for="sharesAmount">Equivalent Shares</label>
                    <input type="number" id="sharesAmount" placeholder="0.0" readonly>
                </div>
                <button class="button" onclick="convertTokens()">
                    <i class="fas fa-calculator"></i> Calculate
                </button>
            </div>

            <!-- Token Details -->
            <div class="section">
                <h2><i class="fas fa-info-circle"></i> Token Information</h2>
                <table style="width:100%; border-collapse: collapse; margin-top: 12px;">
                    <tr>
                        <td>Name:</td>
                        <td id="tokenName">-</td>
                    </tr>
                    <tr>
                        <td>Symbol:</td>
                        <td id="tokenSymbol">-</td>
                    </tr>
                    <tr>
                        <td>Decimals:</td>
                        <td id="tokenDecimals">-</td>
                    </tr>
                    <tr>
                        <td>Your Shares:</td>
                        <td id="userShares">-</td>
                    </tr>
                    <tr>
                        <td>Total Shares:</td>
                        <td id="sharesTotalSupply">-</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <!-- Tab Content: Administration -->
    <div class="tab-content" id="administration">
        <div class="grid">
            <!-- Mint/Burn Section -->
            <div class="section">
                <h2><i class="fas fa-coins"></i> Token Management</h2>
                <div class="input-group">
                    <label for="mintAddress">Target Address</label>
                    <input type="text" id="mintAddress" placeholder="0x...">
                </div>
                <div class="input-group">
                    <label for="mintAmount">Amount</label>
                    <input type="number" id="mintAmount" placeholder="0.0" step="0.01">
                </div>
                <div style="display: flex; gap: 8px;">
                    <button class="button" onclick="mintTokens()">
                        <i class="fas fa-plus-circle"></i> Mint
                    </button>
                    <button class="button" onclick="burnTokens()">
                        <i class="fas fa-minus-circle"></i> Burn
                    </button>
                </div>
            </div>

            <!-- Account Management -->
            <div class="section">
                <h2><i class="fas fa-user-lock"></i> Account Controls</h2>
                <div class="input-group">
                    <label for="blockAddress">Address</label>
                    <input type="text" id="blockAddress" placeholder="0x...">
                </div>
                <div class="input-group">
                    <label for="checkBlockStatus">Account Status</label>
                    <p id="accountBlockStatus">Unknown</p>
                </div>
                <div style="display: flex; gap: 8px;">
                    <button class="button" onclick="checkIfBlocked()">
                        <i class="fas fa-search"></i> Check Status
                    </button>
                    <button class="button button-admin" onclick="blockAccount()">
                        <i class="fas fa-ban"></i> Block
                    </button>
                    <button class="button" onclick="unblockAccount()">
                        <i class="fas fa-unlock"></i> Unblock
                    </button>
                </div>
            </div>

            <!-- Role Management -->
            <div class="section">
                <h2><i class="fas fa-user-shield"></i> Role Administration</h2>
                <div class="input-group">
                    <label for="roleAddress">Address</label>
                    <input type="text" id="roleAddress" placeholder="0x...">
                </div>
                <div class="input-group">
                    <label for="roleSelect">Select Role</label>
                    <select id="roleSelect">
                        <option value="MINTER_ROLE">Minter</option>
                        <option value="BURNER_ROLE">Burner</option>
                        <option value="BLOCKLIST_ROLE">Blocklist</option>
                        <option value="PAUSE_ROLE">Pause</option>
                        <option value="ORACLE_ROLE">Oracle</option>
                    </select>
                </div>
                <div style="display: flex; gap: 8px;">
                    <button class="button" onclick="checkRole()">
                        <i class="fas fa-search"></i> Check Role
                    </button>
                    <button class="button" onclick="grantRole()">
                        <i class="fas fa-plus"></i> Grant
                    </button>
                    <button class="button button-admin" onclick="revokeRole()">
                        <i class="fas fa-minus"></i> Revoke
                    </button>
                </div>
                <p id="roleCheckResult" style="margin-top: 8px; font-size: 14px;"></p>
            </div>

            <!-- Protocol Controls -->
            <div class="section">
                <h2><i class="fas fa-sliders-h"></i> Protocol Administration</h2>
                <div class="input-group">
                    <label for="newMultiplier">Reward Multiplier</label>
                    <input type="number" id="newMultiplier" placeholder="Current: 100" min="1" step="1">
                    <small>Enter value in basis points (100 = 1.00x)</small>
                </div>
                <div style="display: flex; gap: 8px; margin-bottom: 16px;">
                    <button class="button" onclick="setRewardMultiplier()">
                        <i class="fas fa-save"></i> Set Multiplier
                    </button>
                    <button class="button" onclick="incrementRewardMultiplier()">
                        <i class="fas fa-plus"></i> Add to Multiplier
                    </button>
                </div>
                <div>
                    <button class="button button-admin" onclick="togglePause()">
                        <i class="fas fa-pause-circle"></i> <span id="pauseButtonText">Pause Protocol</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab Content: Analytics -->
    <div class="tab-content" id="analytics">
        <div class="section">
            <h2><i class="fas fa-chart-bar"></i> Token Analytics</h2>
            <p>Token analytics will be displayed here. This section will include charts for token supply, transfers, and other metrics.</p>
            <div id="analyticsPlaceholder" style="height: 300px; background-color: #f3f3f3; display: flex; align-items: center; justify-content: center; border-radius: 4px; margin-top: 16px;">
                <p>Analytics data loading...</p>
            </div>
        </div>
    </div>

    <!-- Tab Content: Activity -->
    <div class="tab-content" id="activity">
        <div class="section">
            <h2><i class="fas fa-history"></i> Activity Log</h2>
            <div class="activity-log" id="activityLog">
                <div class="log-entry">Connect your wallet to view activity logs.</div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>